{"version":3,"file":"Transfer.js","sourceRoot":"","sources":["../../ts/components/Transfer.tsx"],"names":[],"mappings":"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","sourcesContent":["import { batch, Signal, useComputed, useSignal, useSignalEffect } from '@preact/signals'\nimport { getAddress, TransactionResponse } from 'ethers'\nimport { connectBrowserProvider, ProviderStore } from '../library/provider.js'\nimport { itentifyAddress, ERC721, ERC1155, SupportedToken } from '../library/identifyTokens.js'\nimport { BlockInfo } from '../library/types.js'\nimport { Button } from './Button.js'\nimport { transferERC1155, transferERC721 } from '../library/transactions.js'\nimport { knownNetworks } from '../library/networks.js'\nimport { BlockieTextInput, NumberInput, TextInput, TokenAmountInput } from './Inputs.js'\nimport { ItemDetails } from './ItemDetails.js'\nimport { EthereumAddress } from '../types/ethereumTypes.js'\nimport { serialize } from '../types/wireTypes.js'\nimport { useAsyncState } from '../library/asyncState.js'\nimport { SingleNotice } from './Notice.js'\nimport { humanReadableEthersError } from '../library/humanEthersErrors.js'\n\nexport const Transfer = ({ provider, blockInfo }: { provider: Signal<ProviderStore | undefined>, blockInfo: Signal<BlockInfo> }) => {\n\tconst selectedNft = useSignal<ERC721 | ERC1155 | undefined>(undefined)\n\tconst selectedMultiAssets = useSignal<{ assets: (ERC721 | ERC1155)[] , displayIndex: number }>({ assets: [], displayIndex: 0 })\n\n\tconst fetchingStates = useSignal<'empty' | 'fetching' | 'complete'>('empty')\n\n\tconst sendText = useComputed(() => {\n\t\tif (!selectedNft.value) return 'Input Token Details'\n\t\tif (selectedNft.value.type === 'ERC1155' && !transferAmount.value) return 'Missing transfer amount'\n\t\tif (!recipientAddress.value) return 'Missing Recipient'\n\t\treturn 'Send'\n\t})\n\n\tconst warning = useSignal<string | undefined>(undefined)\n\n\tconst contractAddressInput = useSignal<string>('')\n\tconst recipientInput = useSignal<string>('')\n\tconst idInput = useSignal<string>('')\n\tconst transferAmountInput = useSignal<string>('')\n\n\tfunction validateAddressInput() {\n\t\tbatch(() => {\n\t\t\tconst openseaMatch = /^https?:\\/\\/opensea\\.io\\/assets\\/([^\\/]+)\\/(0x[a-fA-F0-9]{40})\\/(\\d+)$/.exec(contractAddressInput.value)\n\t\t\tif (openseaMatch === null) {\n\t\t\t\tconst value = contractAddressInput.value.toLowerCase().trim()\n\t\t\t\tcontractAddress.value = /^0x[a-f0-9]*$/.test(value) && value.length === 42 ? getAddress(value) : undefined\n\t\t\t\twarning.value = undefined\n\t\t\t} else {\n\t\t\t\t// Parse OpenSea URL\n\t\t\t\tconst [_, network, address, id] = openseaMatch\n\t\t\t\tconst mappedNetwork = Object.keys(knownNetworks).reduce((match: string | undefined, chainId) => !match && knownNetworks[chainId].openseaSlug && knownNetworks[chainId].openseaSlug === network ? chainId : match, undefined)\n\n\t\t\t\tif (!mappedNetwork) {\n\t\t\t\t\twarning.value = 'NFT Sender doesn\\'t recognize network from the OpenSea URL'\n\t\t\t\t\tcontractAddress.value = undefined\n\t\t\t\t} else if (BigInt(mappedNetwork) !== provider.value?.chainId) {\n\t\t\t\t\twarning.value = provider.value ? `The NFT on the provided URL is on ${knownNetworks[mappedNetwork].displayName}, please change your wallet's network to ${knownNetworks[mappedNetwork].displayName}` : 'Please connect your wallet to fetch NFT details'\n\t\t\t\t\tcontractAddress.value = undefined\n\t\t\t\t\tcontractAddressInput.value = getAddress(address)\n\t\t\t\t\tcontractAddress.value = getAddress(address)\n\t\t\t\t\tidInput.value = id\n\t\t\t\t} else {\n\t\t\t\t\twarning.value = undefined\n\t\t\t\t\tcontractAddressInput.value = getAddress(address)\n\t\t\t\t\tcontractAddress.value = getAddress(address)\n\t\t\t\t\tidInput.value = id\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tuseSignalEffect(() => {\n\t\tif (provider.value) {\n\t\t\tvalidateAddressInput()\n\t\t\tattemptToFetchNft(contractAddress.value, itemId.value)\n\t\t}\n\t})\n\n\tuseSignalEffect(() => {\n\t\tif (contractAddressInput.value) validateAddressInput()\n\t\telse contractAddress.value = undefined\n\n\t\tif (idInput.value) {\n\t\t\tconst value = idInput.value.trim()\n\t\t\titemId.value = /^\\d+$/.test(value) ? BigInt(value) : undefined\n\t\t} else {\n\t\t\titemId.value = undefined\n\t\t}\n\n\t\tif (transferAmountInput.value) {\n\t\t\tconst value = transferAmountInput.value.trim()\n\t\t\tlet amount = /^\\d+$/.test(value) ? BigInt(value) : undefined\n\t\t\tbatch(() => {\n\t\t\t\tif (amount && selectedNft.value && selectedNft.value.type === 'ERC1155' && amount > selectedNft.value.balance) warning.value = 'Transfer amount is greater than your wallet\\'s balance'\n\t\t\t\telse warning.value = undefined\n\t\t\t\ttransferAmount.value = amount\n\t\t\t})\n\t\t} else {\n\t\t\ttransferAmount.value = undefined\n\t\t}\n\t})\n\n\tconst recipientAddress = useComputed<string | undefined>(() => {\n\t\tif (!recipientInput.value) return undefined\n\t\tconst value = recipientInput.value.toLowerCase().trim()\n\t\treturn /^0x[a-f0-9]*$/.test(value) && value.length === 42 ? getAddress(value) : undefined\n\t})\n\tconst contractAddress = useSignal<string | undefined>(undefined)\n\tconst itemId = useSignal<bigint | undefined>(undefined)\n\tconst transferAmount = useSignal<bigint | undefined>(undefined)\n\n\tconst showWarn = useComputed<{ id: boolean, recipient: boolean, contract: boolean, amount: boolean }>(() => {\n\t\tconst id = idInput.value !== '' && itemId.value === undefined\n\t\tconst amount = transferAmountInput.value !== '' && transferAmount.value === undefined\n\t\tconst recipient = recipientInput.value !== '' && recipientAddress.value === undefined\n\t\tconst contract = contractAddressInput.value !== '' && contractAddress.value === undefined\n\t\treturn { id, amount, recipient, contract }\n\t})\n\n\tasync function attemptToFetchNft(address: string | undefined, id: bigint | undefined) {\n\t\tif (address === undefined || id === undefined) {\n\t\t\treturn batch(() => {\n\t\t\t\tselectedNft.value = undefined\n\t\t\t\ttransferAmount.value = undefined\n\t\t\t\tfetchingStates.value = 'empty'\n\t\t\t})\n\t\t}\n\t\tselectedNft.value = undefined;\n\t\tif (!provider.value?.provider) {\n\t\t\treturn warning.value = 'noprovider'\n\t\t}\n\t\tfetchingStates.value = 'fetching'\n\t\ttry {\n\t\t\tconst identifiedAssets = await itentifyAddress(address, id, provider.value?.provider, provider.value?.walletAddress)\n\t\t\tif (identifiedAssets[0].address === contractAddress.value && identifiedAssets[0].inputId === itemId.value) {\n\t\t\t\tconst supportedTypes = identifiedAssets.filter((token): token is SupportedToken => ['ERC721', 'ERC1155'].includes(token.type))\n\t\t\t\tif (supportedTypes.length === 0) {\n\t\t\t\t\tif (identifiedAssets[0].type === 'ERC20') warning.value = 'Token address provided is an ERC20 contract'\n\t\t\t\t\telse if (identifiedAssets[0].type === 'EOA') warning.value = 'Token address provided is an EOA'\n\t\t\t\t\telse warning.value = 'NFT not detected at provided contract address'\n\t\t\t\t} else {\n\t\t\t\t\tselectedNft.value = supportedTypes[0]\n\t\t\t\t\tif (provider.value && selectedNft.value.type === 'ERC721' && BigInt(selectedNft.value.owner) !== provider.value.walletAddress) warning.value = 'You do not own this NFT'\n\t\t\t\t\tif (supportedTypes.length > 1) selectedMultiAssets.value = { displayIndex: selectedMultiAssets.peek().displayIndex >= supportedTypes.length ? 0 : selectedMultiAssets.peek().displayIndex, assets: supportedTypes }\n\t\t\t\t\telse selectedMultiAssets.value = { displayIndex: selectedMultiAssets.value.displayIndex, assets: [] }\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t\tif (typeof e === 'object' && e !== null && 'message' in e) {\n\t\t\t\tif (e.message === 'No ERC721 found at address') return warning.value = 'Invalid token ID for the provided ERC721'\n\t\t\t\tif (e.message === 'Token ID does not exist') return warning.value = 'badid'\n\t\t\t}\n\t\t\treturn console.error(e)\n\t\t}\n\t}\n\n\tconst { value: transactionReceipt, waitFor: waitForTransaction } = useAsyncState<TransactionResponse>()\n\n\tasync function sendTransfer() {\n\t\tif (!selectedNft.value || !recipientAddress.value || !provider.value) return\n\n\t\tif (selectedNft.value.type === 'ERC721') {\n\t\t\tconst txRequestPromise = transferERC721(selectedNft.value, recipientAddress.value, provider.value.provider)\n\t\t\treturn waitForTransaction(() => txRequestPromise)\n\t\t}\n\n\t\tif (selectedNft.value.type === 'ERC1155' && transferAmount.value) {\n\t\t\tconst txRequestPromise = transferERC1155(selectedNft.value, serialize(EthereumAddress, provider.value.walletAddress), recipientAddress.value, transferAmount.value, provider.value.provider)\n\t\t\treturn waitForTransaction(() => txRequestPromise)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className='flex flex-col gap-4 w-full max-w-screen-xl'>\n\t\t\t<h2 className='text-3xl font-semibold'>Transfer NFTs</h2>\n\t\t\t<div className='flex gap-4 flex-col sm:flex-row'>\n\t\t\t\t<TextInput warn={showWarn.value.contract} value={contractAddressInput} size='w-full' label='Contract Address' placeholder='0x133...789 or OpenSea Item URL https://opensea.io/assets/...' />\n\t\t\t\t<NumberInput warn={showWarn.value.id} label='Token ID' placeholder='1' value={idInput} />\n\t\t\t</div>\n\t\t\t{selectedMultiAssets.value.assets.length > 0 ?\n\t\t\t<div className='flex items-center gap-2'>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 className='text-md font-semibold'>Multiple NFT Types Detected</h3>\n\t\t\t\t\t<p className='text-sm'>Select Target NFT Type</p>\n\t\t\t\t</div>\n\t\t\t\t{selectedMultiAssets.value.assets.map((asset, index) =>\n\t\t\t\t\t<Button variant={index === selectedMultiAssets.value.displayIndex ? 'primary' : 'secondary'} onClick={() => batch(() => {\n\t\t\t\t\t\tselectedMultiAssets.value = { ...selectedMultiAssets.peek(), displayIndex: index }\n\t\t\t\t\t\tselectedNft.value = asset\n\t\t\t\t\t\twarning.value = provider.value && selectedNft.value.type === 'ERC721' && BigInt(selectedNft.value.owner) !== provider.value.walletAddress ? 'You do not own this NFT' : undefined\n\t\t\t\t\t})}>{asset.type}</Button>\n\t\t\t\t)}\n\t\t\t</div> : null}\n\t\t\t{selectedNft.value?.type === 'ERC1155' ?\n\t\t\t\t<div className='flex gap-4 flex-col sm:flex-row'>\n\t\t\t\t\t<TokenAmountInput balance={selectedNft.value.balance} value={transferAmountInput} warn={showWarn.value.amount} label='Transfer Amount' size='w-full' placeholder='1' />\n\t\t\t\t</div>\n\t\t\t\t: null}\n\t\t\t{fetchingStates.value !== 'empty' ? (\n\t\t\t\t<div className='flex flex-row flex-wrap border border-white/50 p-4 h-max gap-4'>\n\t\t\t\t\t{fetchingStates.value === 'fetching' ? <ItemDetails item={selectedNft} /> : null}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t\t<BlockieTextInput value={recipientInput} label='Recipient Address' warn={showWarn.value.recipient} placeholder='0x133...789' />\n\t\t\t{warning.value ? <SingleNotice variant='warn' description={warning.value} title='Warning' /> : null}\n\t\t\t{provider.value\n\t\t\t\t? <Button variant='full' disabled={sendText.value !== 'Send'} onClick={sendTransfer}>{sendText.value}</Button>\n\t\t\t\t: <Button variant='full' onClick={() => connectBrowserProvider(provider, blockInfo)}>Connect Wallet</Button>\n\t\t\t}\n\t\t\t{transactionReceipt.value.state === 'rejected' && humanReadableEthersError(transactionReceipt.value.error).warning ? <SingleNotice variant='error' description={humanReadableEthersError(transactionReceipt.value.error).message} title='Error Sending Transfer' /> : null}\n\t\t\t{transactionReceipt.value.state === 'resolved' ? <SingleNotice variant='success' description={`Transaction Hash: ${transactionReceipt.value.value.hash}`} title='Tranaction Submitted' /> : null}\n\t\t</div>\n\t)\n}\n"]}