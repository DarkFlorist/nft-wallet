{"version":3,"file":"humanEthersErrors.js","sourceRoot":"","sources":["../../ts/library/humanEthersErrors.ts"],"names":[],"mappings":"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","sourcesContent":["import { ActionRejectedError, NetworkError, TimeoutError, CancelledError, NumericFaultError, MissingArgumentError, CallExceptionError, TransactionReplacedError, ReplacementUnderpricedError, UnconfiguredNameError, UnexpectedArgumentError, InvalidArgumentError, BufferOverrunError, BadDataError, ServerError, NotImplementedError, UnknownError, UnsupportedOperationError, InsufficientFundsError, NonceExpiredError, OffchainFaultError } from 'ethers'\n\ntype ETHERS_ERROR = (UnknownError & { code: 'UNKNOWN_ERROR' })\n  | (NotImplementedError & { code: 'NOT_IMPLEMENTED' })\n  | (UnsupportedOperationError & { code: 'UNSUPPORTED_OPERATION' })\n  | (NetworkError & { code: 'NETWORK_ERROR' })\n  | (ServerError & { code: 'SERVER_ERROR' })\n  | (TimeoutError & { code: 'TIMEOUT' })\n  | (BadDataError & { code: 'BAD_DATA' })\n  | (CancelledError & { code: 'CANCELLED' })\n  | (BufferOverrunError & { code: 'BUFFER_OVERRUN' })\n  | (NumericFaultError & { code: 'NUMERIC_FAULT' })\n  | (InvalidArgumentError & { code: 'INVALID_ARGUMENT' })\n  | (MissingArgumentError & { code: 'MISSING_ARGUMENT' })\n  | (UnexpectedArgumentError & { code: 'UNEXPECTED_ARGUMENT' })\n  | (CallExceptionError & { code: 'CALL_EXCEPTION' })\n  | (InsufficientFundsError & { code: 'INSUFFICIENT_FUNDS' })\n  | (NonceExpiredError & { code: 'NONCE_EXPIRED' })\n  | (OffchainFaultError & { code: 'OFFCHAIN_FAULT' })\n  | (ReplacementUnderpricedError & { code: 'REPLACEMENT_UNDERPRICED' })\n  | (TransactionReplacedError & { code: 'TRANSACTION_REPLACED' })\n  | (UnconfiguredNameError & { code: 'UNCONFIGURED_NAME' })\n  | (ActionRejectedError & { code: 'ACTION_REJECTED' })\nconst ETHERS_ERROR_CODES = [ 'UNKNOWN_ERROR', 'NOT_IMPLEMENTED', 'UNSUPPORTED_OPERATION', 'NETWORK_ERROR', 'SERVER_ERROR', 'TIMEOUT', 'BAD_DATA', 'CANCELLED', 'BUFFER_OVERRUN', 'NUMERIC_FAULT', 'INVALID_ARGUMENT', 'MISSING_ARGUMENT', 'UNEXPECTED_ARGUMENT', 'CALL_EXCEPTION', 'INSUFFICIENT_FUNDS', 'NONCE_EXPIRED', 'OFFCHAIN_FAULT', 'REPLACEMENT_UNDERPRICED', 'TRANSACTION_REPLACED', 'UNCONFIGURED_NAME', 'ACTION_REJECTED' ] as const\ntype ETHERS_ERROR_CODES = typeof ETHERS_ERROR_CODES[number]\n\nexport function isEthersError(error: unknown): error is ETHERS_ERROR {\n\tif (typeof error !== 'object') return false\n\tif (error === null) return false\n\tif (!('code' in error)) return false\n\tconst code = error.code\n\tif (typeof code !== 'string') return false\n\tif (!ETHERS_ERROR_CODES.includes(code as ETHERS_ERROR_CODES)) return false\n\treturn true\n}\n\nexport type HumanReadableEthersError = { message: string, warning: boolean }\n\nexport function humanReadableEthersError(error: unknown): HumanReadableEthersError {\n\tif (isEthersError(error)) {\n\t\tswitch (error.code) {\n\t\t\t\t// Generic Errors\n\t\t\tcase 'UNKNOWN_ERROR':\n\t\t\t\tconsole.error('Found UNKNOWN_ERROR error: ', error)\n\t\t\t\treturn { warning: true, message: `Unknown Error: ${typeof error === 'string' ? error : JSON.stringify(error)}` }\n\t\t\tcase 'NOT_IMPLEMENTED':\n\t\t\t\tconsole.error('Found NOT_IMPLEMENTED Error: ', error)\n\t\t\t\treturn { warning: true, message: `Error with EthersJS: \"${error.info ? JSON.stringify(error.info) : ''}\". This is a bug and you should report it.`}\n\t\t\tcase 'UNSUPPORTED_OPERATION':\n\t\t\t\treturn { warning: true, message: `Attempted to execute an unsupported operation: \"${error.info ? JSON.stringify(error.info) : ''}\". This is a bug and you should report it.` }\n\t\t\tcase 'SERVER_ERROR':\n\t\t\t\treturn { warning: true, message: `Could not communicate with server. ${error.info ? JSON.stringify(error.info) : ''}` }\n\t\t\tcase 'TIMEOUT':\n\t\t\t\treturn { warning: true, message: `Timeout during action \"${error.operation}\". ${error.reason}` }\n\t\t\tcase 'BAD_DATA':\n\t\t\t\treturn { warning: true, message: `EthersJS tried failed to understand this value: ${JSON.stringify(error.value)}. This is likely a bug and you should report it.` }\n\t\t\tcase 'CANCELLED':\n\t\t\t\treturn { warning: false, message: `Request was canceled by app. ${error.info ? JSON.stringify(error.info) : ''}` }\n\t\t\t// Operational Errors\n\t\t\tcase 'BUFFER_OVERRUN':\n\t\t\t\treturn { warning: true, message: `Buffer overrun. This likely a bug and you should report it. ${error.info ? JSON.stringify(error.info): ''}` }\n\t\t\tcase 'NUMERIC_FAULT':\n\t\t\t\treturn { warning: true, message: `Failed to ${error.operation}. ${error.fault} with value ${error.value}` }\n\t\t\t// Argument Errors\n\t\t\tcase 'INVALID_ARGUMENT':\n\t\t\t\treturn { warning: true, message: `EthersJS received an invalid argument, \"${error.argument}\" with value ${JSON.stringify(error.value)}. This is a bug and you should report it. ${error.stack ?? ''}` }\n\t\t\tcase 'MISSING_ARGUMENT':\n\t\t\t\treturn { warning: true, message: `EthersJS expected ${error.count} arguments and received ${error.expectedCount}. This is a bug and you should report it. ${error.stack ?? ''}` }\n\t\t\tcase 'UNEXPECTED_ARGUMENT':\n\t\t\t\treturn { warning: true, message: `EthersJS received too many arguments. This is a bug and you should report it. ${error.stack ?? ''}` }\n\t\t\t// Blockchain Errors\n\t\t\tcase 'CALL_EXCEPTION':\n\t\t\t\tif (error.receipt) {\n\t\t\t\t\treturn { warning: true, message: `Transaction was included in block #${error.receipt.blockNumber} but reverted${error.reason ? ` with error: ${error.reason}`: ''}` }\n\t\t\t\t} else {\n\t\t\t\t\treturn { warning: true, message: error.reason ? `Transaction will fail. Call exeception during ${error.action}: ${error.reason}`: `The transaction will revert. ${error.reason ?? ''}` }\n\t\t\t\t}\n\t\t\tcase 'INSUFFICIENT_FUNDS':\n\t\t\t\treturn { warning: true, message: `Account ${error.transaction.from} does not have enough funds for this transaction.` }\n\t\t\tcase 'NONCE_EXPIRED':\n\t\t\t\treturn { warning: true, message: `The transaction from ${error.transaction.from} got replaced by a transaction with the same nonce.` }\n\t\t\tcase 'REPLACEMENT_UNDERPRICED':\n\t\t\t\treturn { warning: true, message: `The replacement transaction is underpriced.` }\n\t\t\tcase 'TRANSACTION_REPLACED':\n\t\t\t\treturn { warning: true, message: `The transaction got replaced by a transaction with the same nonce` }\n\t\t\tcase 'UNCONFIGURED_NAME':\n\t\t\t\treturn { warning: true, message: `Could not find ${error.value}. This ENS address may not be registered.` }\n\t\t\tcase 'OFFCHAIN_FAULT':\n\t\t\t\treturn { warning: true, message: `Offchain CCIP Error: ${error.reason}` }\n\t\t\t// User Interaction Errors\n\t\t\tcase 'ACTION_REJECTED':\n\t\t\t\treturn { warning: false, message: 'User rejected the request' }\n\t\t\tdefault:\n\t\t\t\tconsole.error('Found unknown error: ', error)\n\t\t\t\treturn { warning: true, message: `Unknown Error: ${typeof error === 'string' ? error : JSON.stringify(error)}` }\n\t\t}\n\t} else {\n\t\t// string, code, extra?, fallback\n\t\tconsole.error('Found unknown error: ', error)\n\t\treturn { warning: true, message: `Unknown Error: ${typeof error === 'string' ? error : JSON.stringify(error)}` }\n\t}\n}\n"]}